* Scientific Knowledge Mapping System - Agent Guidelines

** General Principles
- *Org Mode First*: Use Org mode for all documentation, notes, and structured content
- *Avoid Markdown*: Do not create .md files unless absolutely necessary (e.g., for web deployment)
- *Emacs Native*: Prefer Emacs built-in formats and tools over external alternatives
- *Consistency*: All documentation follows Org mode conventions

** Nushell Environment
- *Shell Syntax*: This project uses Nushell - adjust commands accordingly
  - Sequential commands: Use =;= instead of =&&= (e.g., =cd dir; make test=)
  - Error handling: Use =try= instead of =||= (e.g., =try { command }=)
  - Piping: =|= works the same as bash
  - Directory navigation: =cd= works the same

- *Nushell Integration Ideas*:
  - Data Processing: Use Nushell pipelines to process citation databases and generate reports
  - Build Automation: Create Nushell scripts for automated testing and deployment
  - Research Workflows: Automate literature review processes with Nushell data manipulation
  - Export/Import: Use Nushell to interface with external data sources and APIs

- *Available Nushell Scripts*:
  - =research-stats.nu=: Generate comprehensive research statistics and analytics
  - =citation-export.nu=: Export citation data in CSV, JSON, or BibTeX formats
  - =literature-review.nu=: Automate literature review generation with topic analysis
  - See =nushell-integration.org= for complete documentation and examples

- *Integration Benefits*:
  - Type-safe data processing prevents research data corruption
  - Pipeline-based workflows for seamless research automation
  - Cross-platform compatibility with scientific mapping system
  - Structured error handling for robust research data operations

** Build/Lint/Test Commands

*** Testing
- *Run all tests*: =make test= or =emacs -Q -batch -l ert -l tests/scientific-mapping-tests.el -f ert-run-tests-batch-and-exit=
- *Run single test*: =emacs -Q -batch -l ert -l tests/<component>-tests.el -f ert-run-tests-batch-and-exit=
- *Interactive testing*: =M-x ert= then select test pattern

*** Building
- *Build web components*: =cd viz-engine && npm run build=
- *Full build*: =make all=

*** Linting
- *Check syntax*: =emacs -Q -batch -f batch-byte-compile <file>.el=
- *Package validation*: =cask install && cask build=

** Code Style Guidelines

*** Org Mode Usage
- *Documentation*: Use Org mode (=.org=) for all documentation files
- *Configuration*: Prefer Org properties and drawers over external config files
- *Notes/Planning*: Use Org files for design documents, TODO lists, and project notes
- *Examples*: Include Org-formatted examples in docstrings when relevant
- *READMEs*: All component READMEs must be in Org format

*** Emacs Lisp Conventions
- *Naming*: Use =kebab-case= for functions/variables, =PascalCase= for major modes
- *Prefixes*: Component-specific prefixes (doc-engine-, viz-engine-, etc.)
- *Documentation*: All functions need docstrings with args and return values
- *Lexical binding*: Always use =;;; -*- lexical-binding: t -*-=

*** Structure
- *Components*: Each in separate directory with main =<component>.el= file
- *Tests*: Corresponding =tests/<component>-tests.el= files
- *Imports*: =(require 'package)= at top, grouped by standard library then external

*** Error Handling
- *Condition-case*: Use for user-facing operations
- *Assert*: Use for internal consistency checks
- *User errors*: Clear, actionable error messages

*** Types & Safety
- *Defcustom*: User options with =:type= specifications
- *Validation*: Input validation for user-provided data
- *Nil checking*: Safe access to optional properties

*** Formatting
- *Indentation*: 2 spaces, follow Emacs defaults
- *Line length*: 80 characters maximum
- *Comments*: =;;= for line comments, =;;;= for section headers
- *Grouping*: Related functions grouped with section comments

*** Component Architecture
- *Modular*: Each component provides single responsibility
- *Integration*: Components communicate via well-defined APIs
- *Configuration*: Customizable via defcustom variables
- *Documentation*: README.org files for all components, use Org properties for metadata
- *Org Integration*: Components should work seamlessly with Org mode features

*** Git Workflow
- *Commits*: Descriptive messages, atomic changes
- *Branches*: Feature branches for new work
- *Testing*: All changes must pass existing tests